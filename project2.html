<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Relational Database Project</title>
    <link rel="stylesheet" href="css/styles.css">

</head>
<body>
    <header>
        <a href="/" class="return-button">
            <button>Return to Index</button>
        </a>
        <h1>Web Relational Database Using Flask and Python</h1>
    </header>
    <main>
        <section>
            <h2>Project Overview</h2>
            <p>This project involves the creation of a web relational database application using Flask, Python, and MySQL. The application allows users to perform CRUD (Create, Read, Update, Delete) operations on the database through a web interface.</p>
        </section>

        <section>
        <h2>Schema Design</h2>
        <p>A database schema was devised that would accomodate for functionalities such as account creation, playlist creation, and playlist editing.</p>
        <ul>
            <li><strong>Table 1: artists</strong>
                <ul>
                    <li>ArtistID: Integer, Primary Key</li>
                    <li>name: String</li>
                    <li>monthly_listeners: Integer</li>
                    <li>country: String</li>
                </ul>
            </li>
            <li><strong>Table 2: users</strong>
                <ul>
                    <li>UserID: Integer, Primary Key</li>
                    <li>password: String</li>
                    <li>username: String</li>
                    <li>email_address: String</li>
                </ul>
            </li>
            <li><strong>Table 3: playlists</strong>
                <ul>
                    <li>PlaylistID: Integer, Primary Key</li>
                    <li>owner_UserID: Integer, Foreign Key</li>
                    <li>playlist_name: String</li>
                </ul>
            </li>
            <li><strong>Table 4: songs</strong>
                <ul>
                    <li>songID: Integer, Primary Key</li>
                    <li>song_artistID: Integer, Foreign Key</li>
                    <li>name: String</li>
                    <li>genre: String</li>
                    <li>decade: Integer</li>
                </ul>
            </li>
            <li><strong>Table 5: playlist_songs</strong>
                <ul>
                    <li>PlaylistID: Integer, Primary Key(composite), Foreign Key</li>
                    <li>songID: Integer, Primary Key(composite), Foreign Key</li>
                </ul>
            </li>
        </ul>
    </section>

        <section>
            <h2>Initialization</h2>
            <p>A Flask app environment and an instance of the database are created:</p>
            <img src="images/webdatabase init snippet.png" alt="db init">
            <p>A full database dump .sql file is available on the GitHub repository with the CREATE statements for all other tables.</p>
        </section>

        <section>
            <h2>Implementing CRUD functions</h2>
            <p>The account functionality was implemented, allowing users to create accounts and sign in:</p>
            <img src="images/webdatabase account functionality.png" alt="Account functionality">
            <p>Users can create a new account, which stores their credentials in MySQL, and sign in to access their playlists:</p>
            <img src="images/webdatabase signin page.png" alt="Sign-in page">
            <p>Once signed in, users can create and manage playlists:</p>
            <img src="images/webdatabase playlist functionality.png" alt="Playlist functionality">
        </section>

        <section>
            <h2>Filtered Reports</h2>
            <p>The final functionality implemented was allowing users to filter playlist songs based on attributes like genre and decade. A stored procedure was used for querying the data:</p>
            <img src="images/webdatabase stored procedure.png" alt="Stored procedure">
        </section>

        <section>
            <h2>Table Indexing and Transaction Concurrency</h2>
            <p>To enhance performance, indexing was applied to certain columns like PlaylistID, SongID, and UserID. This reduces query execution time. Additionally, transaction isolation levels were considered to ensure the database maintains integrity.</p>
        </section>

        <section>
            <h2>Code</h2>
            <p>The code for this project is available on <a href="https://github.com/Keegodude/MySQL-Web-DB">GitHub</a>. The following files are included:</p>
            <ul>
                <li><strong>main.py</strong>: The main Flask application file.</li>
                <li><strong>templates/</strong>: Directory containing the HTML templates.</li>
                <li><strong>CreateReport.sql</strong>: Stored procedure for filtering report data.</li>
                <li><strong>musicdb_dump.sql</strong>: Database dump to create a copy of the DB.</li>
            </ul>
        </section>

        <section>
            <h2>Future Work</h2>
            <p>Future improvements include integrating the Spotify API to fetch real user data and improving the front-end for a better user experience.</p>
        </section>

        <section>
            <h2>Project Takeaways</h2>
            <p>This project helped me gain a deeper understanding of Flask, web development, relational databases, and SQL injection prevention.</p>
        </section>
    </main>
</body>
</html>
